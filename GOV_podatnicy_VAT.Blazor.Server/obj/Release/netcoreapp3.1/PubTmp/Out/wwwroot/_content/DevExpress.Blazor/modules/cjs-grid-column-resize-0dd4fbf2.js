DxBlazorInternal.define("cjs-grid-column-resize-0dd4fbf2.js",(function(e,t,i){e("./cjs-chunk-c5286524.js"),e("./cjs-chunk-0da7e9be.js");var n=e("./cjs-dom-utils-d155391a.js"),o=e("./cjs-chunk-ad620f3e.js"),s=e("./cjs-chunk-96905969.js"),l=e("./cjs-chunk-e9e6b6d6.js"),r=e("./cjs-dx-style-helper-04d43993.js");function h(e){window.dxAccessibilityHelper||(window.dxAccessibilityHelper=new u),window.dxAccessibilityHelper.sendMessageToAssistiveTechnology(e)}var u=function(){this._helperElement=null},a={helperElement:{configurable:!0}};a.helperElement.get=function(){return null==this._helperElement&&(this._helperElement=this.createHelperElement()),this._helperElement},u.prototype.createHelperElement=function(){var e=document.createElement("DIV");return e.className="dxAIFE dxAIFME",e.setAttribute("role","note"),e.setAttribute("aria-live","assertive"),document.documentElement.appendChild(e),e},u.prototype.sendMessageToAssistiveTechnology=function(e){var t=this;this.helperElement.innerHTML=e,setTimeout((function(){t.helperElement.innerHTML=""}),300)},Object.defineProperties(u.prototype,a);var d={Disabled:0,NextColumn:1,Component:2},c=0,m=1,p=2,f=function(e,t,i,n){this._mainElement=e,this._nextHeaderCellElement=e.nextElementSibling,this._blazorComponent=n,this._gridResizeProxy=t,this._mode=i,this._resizeParameters={},this._resizeAnchor=null,this._lastWidth=null,this._lastNextWidth=null,this._timeoutId=null,this._leftMouseXBoundary=null,this._rightMouseXBoundary=null,this._initWidth=null,this._initNextWidth=null,this._allWidth=null,this._totalDiffX=0},g={mainElement:{configurable:!0},nextHeaderCellElement:{configurable:!0},hasNextColumn:{configurable:!0},hasColumnId:{configurable:!0},gridResizeProxy:{configurable:!0},blazorComponent:{configurable:!0},resizeAnchor:{configurable:!0},caption:{configurable:!0},isResizeAllowed:{configurable:!0},step:{configurable:!0}};g.mainElement.get=function(){return this._mainElement},g.nextHeaderCellElement.get=function(){return this._nextHeaderCellElement},g.hasNextColumn.get=function(){return!!this._nextHeaderCellElement},g.hasColumnId.get=function(){return this.mainElement.hasAttribute("data-dxdg-column-id")},g.gridResizeProxy.get=function(){return this._gridResizeProxy},g.blazorComponent.get=function(){return this._blazorComponent},g.resizeAnchor.get=function(){return this._resizeAnchor},g.caption.get=function(){return this.mainElement.innerText},g.isResizeAllowed.get=function(){return this._mode!==d.Disabled&&this.hasColumnId&&(this.hasNextColumn||this._mode===d.Component)},g.step.get=function(){var e=Math.ceil((this._resizeParameters.maxWidth-this._resizeParameters.minWidth)/100);return e>5&&(e=5),e},f.prototype.initialize=function(){this.createResizeAnchor(),M().initializeHeaderCellEvents(this),this.initializeEvents()},f.prototype.initializeEvents=function(){this.isResizeAllowed&&(this.mainElement.addEventListener("focus",this.onFocus.bind(this)),this.mainElement.addEventListener("keydown",this.onKeyDown.bind(this)),this.mainElement.addEventListener("keyup",this.onKeyUp.bind(this)))},f.prototype.onFocus=function(e){o.getEventSource(e)===this.mainElement&&(this.onFocusCore(),this.updateResizeParameters())},f.prototype.onKeyDown=function(e){if(o.getEventSource(e)===this.mainElement)switch(e.keyCode){case l.Key.Left:this.onKeyResize(-this.step),e.stopPropagation(),e.preventDefault();break;case l.Key.Right:this.onKeyResize(this.step),e.stopPropagation(),e.preventDefault()}},f.prototype.onKeyResize=function(e){this._lastWidth||this.onStartKeyResize();var t=1500;this.hasNextColumn&&(t=this._lastWidth+this._lastNextWidth);var i=this._lastWidth+e;i>30&&(this._totalDiffX+=e),n.RequestAnimationFrame(function(){this.setWidth(i,t,this._totalDiffX)}.bind(this)),this._timeoutId&&clearTimeout(this._timeoutId)},f.prototype.onStartKeyResize=function(){this._lastWidth=this.mainElement.getBoundingClientRect().width,this._lastNextWidth=this.hasNextColumn?this.nextHeaderCellElement.getBoundingClientRect().width:0,this.gridResizeProxy.initializeComponensWidths(),this._totalDiffX=0},f.prototype.onKeyUp=function(e){var t=this;if(o.getEventSource(e)===this.mainElement){var i=e.keyCode;i===l.Key.Left&&i===l.Key.Right&&(this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=setTimeout((function(){return t.invokeSetWidth()}),500))}},f.prototype.updateResizeParameters=function(){var e=this.mainElement.getBoundingClientRect().width,t=this.hasNextColumn?this.nextHeaderCellElement.getBoundingClientRect().width:0,i=this.isResizeAllowed,n=1500;this._mode===d.NextColumn&&(n=e+t-30),this._resizeParameters={allowResize:i,minWidth:i?30:e,currentWidth:e,maxWidth:i?n:e}},f.prototype.update=function(e){var t=this.isResizeAllowed;this._nextHeaderCellElement=this.mainElement.nextElementSibling,this._mode=e,this.isResizeAllowed?t||(this.mainElement.appendChild(this._resizeAnchor),M().initializeHeaderCellEvents(this)):t&&(this.mainElement.removeChild(this._resizeAnchor),M().removeHeaderCellEvents(this))},f.prototype.createResizeAnchor=function(){var e=document.createElement("div");n.addClassNameToElement(e,"dxColumnResizeAnchor"),e.dxResizableHeaderCell=this,this._resizeAnchor=e,this.mainElement.appendChild(e)},f.prototype.onMouseDown=function(){this.setMouseBoundaries(),this.onFocusCore(),this.gridResizeProxy.initializeComponensWidths()},f.prototype.setMouseBoundaries=function(){var e=this.mainElement.getBoundingClientRect(),t=Math.min(30,e.width);if(this._leftMouseXBoundary=e.left+t-10,this._initWidth=e.width,this._mode===d.NextColumn){var i=this.nextHeaderCellElement.getBoundingClientRect();this._rightMouseXBoundary=e.right+i.width-30,this._initNextWidth=i.width,this._allWidth=e.width+i.width}},f.prototype.removeMouseBoundaries=function(){this._leftMouseXBoundary=null,this._rightMouseXBoundary=null,this._initWidth=null,this._initNextWidth=null,this._allWidth=null},f.prototype.getResizeType=function(e){return e<=this._leftMouseXBoundary?m:this._rightMouseXBoundary&&e>=this._rightMouseXBoundary?p:c},f.prototype.onFocusCore=function(){this.isResizeAllowed&&(this.ensureWidthSyncronized(),h("Width is "+this.mainElement.offsetWidth+" pixels. Use arrow keys to resize."))},f.prototype.onDragResizeAnchor=function(e,t){if(this.isResizeAllowed){var i=this.getResizeType(t),n=this.getNewWidth(e,i);i===m&&(e=n-this._initWidth),this.setWidth(n,this._allWidth,e)}},f.prototype.getNewWidth=function(e,t){switch(t){case m:var i=this.mainElement.getBoundingClientRect().width;return Math.min(30,i);case p:return this._allWidth-30;default:return this._initWidth+e}},f.prototype.onDragResizeAnchorStop=function(){this.removeMouseBoundaries(),this.invokeSetWidth()},f.prototype.setWidth=function(e,t,i){if(!this.isWidthChanged(e)||!this.isValidWidth(e,t,i))return!1;var o=function(e){if("border-box"===window.getComputedStyle(e,null).getPropertyValue("box-sizing"))return 0;return n.getLeftRightPaddings(e)}(this.mainElement),s=t-(e-=o)-o;return this._lastWidth=e,this._lastNextWidth=s,this.gridResizeProxy.setWidth(this._mode,e,s,i),!0},f.prototype.isWidthChanged=function(e){return e!==this._lastWidth},f.prototype.invokeSetWidth=function(){var e=this;this._lastWidth&&this._lastNextWidth&&(this.gridResizeProxy.resetWidth(),M().lockResize(),this.blazorComponent.invokeMethodAsync("SetColumnWidths",v(this.mainElement),this._lastWidth,v(this.nextHeaderCellElement),this._lastNextWidth).then((function(){e._lastWidth=null,e._lastNextWidth=null,M().unlockResize()})))},f.prototype.isValidWidth=function(e,t,i){var n=e>=30||(this._lastWidth?e>this._lastWidth:i>0);return n&&this._mode!==d.Component&&(n=e<=t-30),n},f.prototype.ensureWidthSyncronized=function(){if(!this.isWidthSyncronized()){var e=this.gridResizeProxy;this.blazorComponent.invokeMethodAsync("GetCellCache").then((function(t){e.syncronizeWidth(t)}))}},f.prototype.isWidthSyncronized=function(){var e=!1,t=this.gridResizeProxy.getColElementInlineWidth();0===t?e=!0:e=t===this.mainElement.getBoundingClientRect().width;return e},Object.defineProperties(f.prototype,g);var y=function(e,t){this.mainElement=e,this.update(t)},_={colElements:{configurable:!0},elementsToSetComponentWidth:{configurable:!0},elementsToSyncWidth:{configurable:!0},elementsToCheckScroll:{configurable:!0},elementsToReset:{configurable:!0}};_.colElements.get=function(){return T(this._colElements,this._resizeElements.colElements)},_.elementsToSetComponentWidth.get=function(){return T(this._elementsToSetComponentWidth,this._resizeElements.elementsToSetComponentWidth)},_.elementsToSyncWidth.get=function(){return T(this._elementsToSyncWidth,this._resizeElements.elementsToSyncWidth)},_.elementsToCheckScroll.get=function(){return T(this._elementsToCheckScroll,this._resizeElements.elementsToCheckScroll)},_.elementsToReset.get=function(){return T(this._elementsToReset,this._resizeElements.elementsToReset)},y.prototype.update=function(e){this._resizeElements=e,this._colElements=null,this._elementsToSetComponentWidth=null,this._elementsToSyncWidth=null,this._elementsToCheckScroll=null,this._elementsToReset=null,this._initWidths=null},y.prototype.setWidth=function(e,t,i,n){h(t+" pixels"),this.setComponentWidth(n),this.colElements.forEach((function(n){n.style.width=b(t),e===d.NextColumn&&(n.nextElementSibling.style.width=b(i))}))},y.prototype.setComponentWidth=function(e){if(this.elementsToSetComponentWidth&&!this.isScrollExists()){var t=[],i=this._initWidths;this.elementsToSetComponentWidth.forEach((function(n){return t.push(new z(n,i.get(n)+e))})),this.elementsToSyncWidth&&t.push(new z(this.elementsToSyncWidth[0],i.get(this.elementsToSyncWidth[1])+e)),t.forEach((function(e){return e.apply()}))}},y.prototype.initializeComponensWidths=function(){if(this.elementsToSetComponentWidth){var e=new Map;if(this.elementsToSetComponentWidth.forEach((function(t){return e.set(t,t.getBoundingClientRect().width)})),this.elementsToSyncWidth){var t=this.elementsToSyncWidth[1];e.set(t,t.getBoundingClientRect().width)}this._initWidths=e}},y.prototype.isScrollExists=function(){var e=this.elementsToCheckScroll;if(e)return e[0].clientWidth<e[1].clientWidth},y.prototype.getColElementInlineWidth=function(){for(var e=0,t=this.colElements,i=0;i<t.length;i++){var n=t[i].style.width;if(""!==n){e=parseInt(n);break}}return e},y.prototype.syncronizeWidth=function(e){n.RequestAnimationFrame((function(){for(var t=e.map((function(e){var t=n.ensureElement(e[0]);return t?{width:t.getBoundingClientRect().width,cols:S(e[1])}:null})).filter((function(e){return e})),i=0;i<t.length;i++)for(var o=t[i].cols,s=0;s<o.length;s++)o[s].style.width=b(t[i].width)}))},y.prototype.resetWidth=function(){this.elementsToReset&&!this.isScrollExists()&&this.elementsToReset.forEach((function(e){e.style.width=null}))},Object.defineProperties(y.prototype,_);var z=function(e,t){this._element=e,this._width=t};z.prototype.apply=function(){this._element.style.width=b(this._width)};var E=function(){this._pageX=-1,this._resizeLock=0,this._resizableHeaderCell=null},C={pageX:{configurable:!0},resizableHeaderCell:{configurable:!0}};function v(e){return e?e.getAttribute("data-dxdg-column-id").split("|")[0]:(-1).toString()}function W(e){return e.pageX||e.changedTouches&&e.changedTouches[0].pageX||0}function R(e){var t=M(),i=o.getEventSource(e).dxResizableHeaderCell;if(i&&i.isResizeAllowed){var n=W(e);t.onMouseDown(i,n)}}function w(e){var t=M();if(!t.isResizeLocked()&&-1!==t.pageX){var i=W(e),o=i-t.pageX;if(0!==o){var s=t.resizableHeaderCell;s&&n.RequestAnimationFrame((function(){s.onDragResizeAnchor(o,i)}))}}}function x(){var e=M();e.resizableHeaderCell.onDragResizeAnchorStop(),e.invalidateState(),document.removeEventListener(s.TouchUIHelper.touchMouseMoveEventName,w),document.removeEventListener(s.TouchUIHelper.touchMouseUpEventName,x)}function b(e){return e+"px"}function T(e,t){return t?(e||(e=S(t)),e):null}function S(e){return e.map((function(e){return document.getElementById(e)}))}function M(){return null===window.dxResizeEventManagerInstance&&(window.dxResizeEventManagerInstance=new E),window.dxResizeEventManagerInstance}C.pageX.get=function(){return this._pageX},C.resizableHeaderCell.get=function(){return this._resizableHeaderCell},E.prototype.initializeHeaderCellEvents=function(e){this.initializeMouseDown(e.resizeAnchor)},E.prototype.initializeMouseDown=function(e){e.addEventListener(s.TouchUIHelper.touchMouseDownEventName,R)},E.prototype.initializeMouseMove=function(){document.addEventListener(s.TouchUIHelper.touchMouseMoveEventName,w)},E.prototype.initializeMouseUp=function(){document.addEventListener(s.TouchUIHelper.touchMouseUpEventName,x)},E.prototype.removeHeaderCellEvents=function(e){e.resizeAnchor.removeEventListener(s.TouchUIHelper.touchMouseDownEventName,R)},E.prototype.onMouseDown=function(e,t){this._resizableHeaderCell=e,e.onMouseDown(),this._pageX=t,this.initializeMouseMove(),this.initializeMouseUp()},E.prototype.lockResize=function(){this._resizeLock++},E.prototype.unlockResize=function(){this._resizeLock--},E.prototype.isResizeLocked=function(){return this._resizeLock>0},E.prototype.invalidateState=function(){this._pageX=-1,this._resizableHeaderCell=null},Object.defineProperties(E.prototype,C),window.dxResizeEventManagerInstance=null;var A=new Map;function k(e,t,i,o){if(e=n.ensureElement(e)){var s=A.get(e);if(s)s.update(i),s.gridResizeProxy.update(t);else{var l=new y(e,t);(s=new f(e,l,i,o)).isResizeAllowed&&(s.initialize(),A.set(e,s))}return r.ensureAccentColorStyle(),Promise.resolve("ok")}}var H={initResizeColumn:k};i.ColumnResizeMode=d,i.default=H,i.initResizeColumn=k,i.minColumnWidth=30}),["cjs-chunk-c5286524.js","cjs-chunk-0da7e9be.js","cjs-dom-utils-d155391a.js","cjs-chunk-ad620f3e.js","cjs-chunk-96905969.js","cjs-chunk-e9e6b6d6.js","cjs-dx-style-helper-04d43993.js"]);
