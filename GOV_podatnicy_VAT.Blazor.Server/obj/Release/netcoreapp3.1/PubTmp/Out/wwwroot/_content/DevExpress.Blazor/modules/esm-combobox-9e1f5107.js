import"./esm-chunk-d81494b9.js";import"./esm-chunk-a2731447.js";import{ensureElement as e,elementIsInDOM as t}from"./esm-dom-utils-aa188e06.js";import{a as o,d as n}from"./esm-chunk-9c16a801.js";import{d as s,r}from"./esm-chunk-208505fb.js";import{T as c}from"./esm-chunk-1b6abd73.js";import{K as u}from"./esm-chunk-808bf349.js";import{getDropDownElement as i,onOutsideClick as a,isDropDownVisible as d}from"./esm-dropdowns-60e620fe.js";import{scrollToFocusedItem as m,getParametersForVirtualScrollingRequest as l}from"./esm-grid-e30d4183.js";import"./esm-grid-column-resize-3c803caa.js";import"./esm-dx-style-helper-4f7c588c.js";import"./esm-chunk-365cd234.js";import"./esm-focus-utils-70e3961c.js";import"./esm-chunk-d4fc448c.js";import"./esm-dragAndDropUnit-d3f27dbf.js";import{k as f,a as p}from"./esm-chunk-30985063.js";function k(e){const t=i(e);m(t)}function y(t){t=e(t),document.activeElement===t&&h(t)}function C(e,t){e.dataset.timerId&&(clearTimeout(e.dataset.timerId),delete e.dataset.timerId),t||setTimeout((function(){C(e,!0)}),100)}function h(e){e&&e.dataset.focusedClass&&(e.className=e.dataset.focusedClass)}function v(e,t,o,n,s){j(e)&&e.preventDefault();const r=function(e){const t=e.altKey&&(e.keyCode===u.Down||e.keyCode===u.Up),o=g(e),n=e.keyCode===u.Esc||e.keyCode===u.Enter;return t||o||n}(e)&&!e.repeat;n&&!e.repeat&&f(e),r&&b(e,t,o,s)}function b(e,t,o,n){const s=e.target.value;if(o&&n){const n=o.querySelector(".dxgvCSD");n&&(o=n);const r=l(o,!1);t.invokeMethodAsync("ComboBoxVirtualScrollingProcessKey",s,e.keyCode,e.altKey,e.ctrlKey,r.requestScrollState.itemHeight,r.requestScrollState.scrollTop,r.requestScrollState.scrollHeight)}else t.invokeMethodAsync("ComboBoxProcessKey",s,e.keyCode,e.altKey,e.ctrlKey)}function g(e){return e.keyCode===u.Down||e.keyCode===u.Up||e.keyCode===u.PageUp||e.keyCode===u.PageDown||e.ctrlKey&&(e.keyCode===u.Home||e.keyCode===u.End)}function j(e){return g(e)||e.keyCode===u.Enter}function w(e,t,o){if(!t)return;const n=(new Date).getTime();t.dataset.lastLostFocusTime&&n-t.dataset.lastLostFocusTime<300&&!o||(t.dataset.lastLostFocusTime=(new Date).getTime(),e.invokeMethodAsync("OnComboBoxLostFocus",t.value))}function E(m,l,f){const k=e(m);if(!k)return;s(k);const y=l.filteringEnabled,g=e(l.inputElement),E=i(k),D=E,S=function(e){return v(e,f,D,y,l.virtualScrollingEnabled)},T=function(e){return function(e,t,o,n,s){return j(e)?(e.preventDefault(),e.keyCode!==u.Up&&e.keyCode!==u.Down||t.invokeMethodAsync("OnComboBoxKeyUp",e.keyCode===u.Up)):n&&p(e)&&b(e,t,o,s),!1}(e,f,D,y,l.virtualScrollingEnabled)},I=function(e){return function(e,t){h(e.target)}(e)},K=function(e){return function(e,t,o){const n=e.target;C(n,!0),n.dataset.timerId=setTimeout((function(){if(delete n.dataset.timerId,function(e){e&&e.dataset.bluredClass&&(e.className=e.dataset.bluredClass)}(n),document.activeElement!==n&&o.dataset.disposeId)try{w(t,n)}catch(e){}}),200)}(e,f,k)},x=function(e){return C(g)},U=function(e){return a(e,k,(function(){t(k)||s(k);const e=document.activeElement===g,o=g.dataset.timerId>0,n=E&&d(E);C(g),(e||o||n)&&w(f,g,!0)}))};return o(g,"keydown",S),o(g,"keyup",T),o(g,"focus",I),o(g,"blur",K),o(k,"mousedown",x),o(document,c.touchMouseDownEventName,U),r(k,(function(){n(g,"keydown",S),n(g,"keyup",T),n(g,"focus",I),n(g,"blur",K),n(k,"mousedown",x),n(document,c.touchMouseDownEventName,U)})),Promise.resolve("ok")}function D(t){if(t=e(t))return s(t),Promise.resolve("ok")}const S={init:E,dispose:D,prepareInputIfFocused:y,scrollToSelectedItem:k};export default S;export{D as dispose,E as init,y as prepareInputIfFocused,k as scrollToSelectedItem};
